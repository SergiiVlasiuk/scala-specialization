## –ö–æ–Ω—Ü–µ–ø—Ç–∏

| –ü–æ—Ç—Ä–µ–±–∞                             | –†—ñ—à–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—ó                                         | –ü—Ä–∏–∫–ª–∞–¥ —ñ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥—É                                           |
| ----------------------------------- | ------------------------------------------------------------- | ------------------------------------------------------------------- |
| üîß **–ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ª–æ–≥—ñ–∫–∏** | **–ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö    | –í–∞–ª—ñ–¥–∞—Ç–æ—Ä: `minLengthValidator(5)` –ø–æ–≤–µ—Ä—Ç–∞—î `String => Boolean`     |
| ‚öô **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å**              | –§—É–Ω–∫—Ü—ñ—è **–∑–∞–º–∫–Ω—É–ª–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä** ‚Äî —Ç–∏ –±—ñ–ª—å—à–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—î—à –π–æ–≥–æ    | `makeDiscountFunc(10%)` ‚Üí –ø–æ—Ç—ñ–º –ø—Ä–æ—Å—Ç–æ `f(price)`                   |
| ‚ôª **–ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π**          | `val f = a => a + 1; val g = a => a * 2; val h = f andThen g` | –ö–æ–º–ø–æ–∑–∏—Ü—ñ—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ–π JSON, —Ñ–æ—Ä–º, –¥–∞–Ω–∏—Ö                          |
| üßº **–Ü–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è –¥–µ—Ç–∞–ª–µ–π**         | –¢–∏ –ø–æ–≤–µ—Ä—Ç–∞—î—à —Ç—ñ–ª—å–∫–∏ API ‚Äî –∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞              | `getAuthStrategy(config)` –ø–æ–≤–µ—Ä—Ç–∞—î –≥–æ—Ç–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫ "—á–æ—Ä–Ω–∏–π —è—â–∏–∫" |
| üí¨ **–í–∏—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞–º—ñ—Ä—É**             | "–Ø –ø–æ–≤–µ—Ä—Ç–∞—é —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", –∞ –Ω–µ "—Ä–µ–∑—É–ª—å—Ç–∞—Ç"                     | `makeRouter()` –ø–æ–≤–µ—Ä—Ç–∞—î HTTP-—Ä–æ—É—Ç–µ—Ä —Ñ—É–Ω–∫—Ü—ñ—é: `Request => Response`  |

# –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π DSL-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫:

- **–ú–µ—Ç–æ–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó** ‚Üí –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.
- **–ö–∞—Ä—Ä—ñ–Ω–≥** ‚Üí –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤.
- **PartialFunction +** orElse ‚Üí –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏, —è–∫ LEGO.
- **Middleware** ‚Üí –º–æ–¥—É–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤.
- **–Ü–Ω–∂–µ–∫—Ü—ñ—è –ª–æ–≥–µ—Ä–∞** ‚Üí –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –±–µ–∑ OOP-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

## üîß –©–æ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –¥–∞–ª—ñ:

- DSL –∑ given-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
- Async/Future –ø—ñ–¥—Ç—Ä–∏–º–∫—É
- HTTP-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ sttp –∞–±–æ http4s
- Unit-—Ç–µ—Å—Ç–∏ –Ω–∞ –æ–±—Ä–æ–±–∫—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤

## –í–∏—Å–Ω–æ–≤–∫–∏ ‚Äî –º–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–ª–∏

| –ö–æ–Ω—Ü–µ–ø—Ç                        | –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è                                    |
| ------------------------------ | --------------------------------------------- |
| ‚úÖ **–ö–∞—Ä—Ä—ñ–Ω–≥**                  | `route("GET", "/") { req => ... }`            |
| ‚úÖ **–Ü–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è**             | –º–µ—Ç–æ–¥ `route` —Ö–æ–≤–∞—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –ª–æ–≥—ñ–∫—É          |
| ‚úÖ **–§—É–Ω–∫—Ü—ñ—è –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é** | `makeApp(...)` –ø–æ–≤–µ—Ä—Ç–∞—î `Request => Response` |
| ‚úÖ **DSL-–ø–æ–¥—ñ–±–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**   | `route(...)(_ => Response(...))`              |
| ‚úÖ **–ö–æ–Ω–≤–µ—î—Ä (middleware)**     | `withMiddleware(mw)(handler)`                 |
| ‚úÖ **–Ü–Ω–∂–µ–∫—Ü—ñ—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**     | `routeWithLogging(logger)(...)`               |

![–±–ª–æ–∫ —Å—Ö–µ–º–∞](flowchart.png)

<details><summary>Mermaid sequence diagram</summary>

```mermaid
sequenceDiagram
  participant Caller
  participant Router
  participant Handler
  participant App

  Caller->>Router: route("GET", "/health")
  Router-->>Caller: returns PartialFunction
  Caller->>Handler: pass handler function

  App->>Router: apply(req)
  Router->>Handler: handler(req)
  Handler-->>Router: Response(200, "OK")
  Router-->>App: Response(200, "OK")
```
</details>
