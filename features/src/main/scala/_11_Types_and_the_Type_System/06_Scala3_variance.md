# –í–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å (`Variance`): —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å (`invariance`), –∫–æ–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å (`covariance`) —ñ –∫–æ–Ω—Ç—Ä–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å (`contravariance`)

## `Variance`: `+T`/`T`/`-T` `covariance`/`invariance`/`contravariance`

- **–í–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** ‚Äî —Ü–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å —Ç–∏–ø—ñ–≤, —è–∫–∞ –≤–∏–∑–Ω–∞—á–∞—î, —á–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –ø—ñ–¥—Ç–∏–ø—ñ–≤ –º—ñ–∂ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ `Dog` —î –ø—ñ–¥—Ç–∏–ø–æ–º `Animal`, —Ç–æ —á–∏ –±—É–¥–µ `Box[Dog]` –ø—ñ–¥—Ç–∏–ø–æ–º `Box[Animal]`?
- **–ö–æ–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`+A`) ‚Äî —Ü–µ –∫–æ–ª–∏ —Ç–∏–ø `C[Dog]` –≤–≤–∞–∂–∞—î—Ç—å—Å—è –ø—ñ–¥—Ç–∏–ø–æ–º `C[Animal]`, —è–∫—â–æ `Dog <: Animal`. –¢–∞–∫–∏–π —Ç–∏–ø **–±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è**.
- **–ö–æ–Ω—Ç—Ä–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`-A`) ‚Äî —Ü–µ –∫–æ–ª–∏ —Ç–∏–ø `C[Animal]` –≤–≤–∞–∂–∞—î—Ç—å—Å—è –ø—ñ–¥—Ç–∏–ø–æ–º `C[Dog]`, —è–∫—â–æ `Dog <: Animal`. –¢–∞–∫–∏–π —Ç–∏–ø **–±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –¥–ª—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏)**.
- **–Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`A`) ‚Äî —Ü–µ –∫–æ–ª–∏ `C[Dog]` —Ç–∞ `C[Animal]` –≤–≤–∞–∂–∞—é—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ—Å—É–º—ñ—Å–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ `Dog <: Animal`.


–£ Scala **–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** –æ–ø–∏—Å—É—î, —è–∫ —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ –º—ñ–∂ —Å–∫–ª–∞–¥–Ω—ñ—à–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Box[Dog]`) –ø–æ–≤'—è–∑–∞–Ω–µ –∑—ñ —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è–º —ó—Ö–Ω—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∏—Ö —Ç–∏–ø—ñ–≤ (`Dog` ‚Üí `Animal`). –Ñ —Ç—Ä–∏ —Ç–∏–ø–∏:

```scala 3
class Animal
class Dog extends Animal
class Cat extends Animal
```

---

### üìä –¢–∞–±–ª–∏—Ü—è –ø—Ä–∞–≤–∏–ª –≤–∞—Ä—ñ–∞–Ω—Ç–Ω–æ—Å—Ç—ñ –≤ Scala


| –¢–∏–ø –≤–∞—Ä—ñ–∞–Ω—Ç–Ω–æ—Å—Ç—ñ  | –ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è | –ó–≤‚Äô—è–∑–æ–∫ –ø—ñ–¥—Ç–∏–ø—É                                                                               |–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è                              |  –í–∏—Ä–æ–±–ª—è—î (–ø–æ–≤–µ—Ä—Ç–∞—î)? | –°–ø–æ–∂–∏–≤–∞—î (–ø—Ä–∏–π–º–∞—î)? | –ü—Ä–∏–∫–ª–∞–¥–∏                | –û–±–º–µ–∂–µ–Ω–Ω—è                                                              |
| ----------------- | ---------- |-----------------------------------------------------------------------------------------------| -------------------- | ------------------- | -------------------------------------------------- |-------------------------| ---------------------------------------------------------------------- |
| –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å    | `A`        | ‚ùå –ù–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è<br/>`Box[Dog]` –Ω–µ —î –ø—ñ–¥—Ç–∏–ø–æ–º `Box[Animal]`<br/>(`Box[Dog]` ‚â† `Box[Animal]`) | –ö–æ–ª–∏ —Ç–∏–ø —ñ —á–∏—Ç–∞—î, —ñ –∑–∞–ø–∏—Å—É—î<br/>–ö–æ–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ –≤–∏—Ä–æ–±–ª—è—î, —ñ —Å–ø–æ–∂–∏–≤–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Mutable Box).                        | ‚úÖ –¢–∞–∫                | ‚úÖ –¢–∞–∫               | `var` –ø–æ–ª—è, –º—É—Ç–∞–±–µ–ª—å–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó, `Box` –∑ `get` —ñ `set`    | –ù–∞–π–±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π, –∞–ª–µ –Ω–∞–π–º–µ–Ω—à –≥–Ω—É—á–∫–∏–π. `Box[Dog]` —ñ `Box[Animal]` - —Ü–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏              |
| –ö–æ–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å    | `+A`       | ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è<br/>–±–æ `Box[Dog]` —î –ø—ñ–¥—Ç–∏–ø–æ–º `Box[Animal]`<br/>`Box[Dog]` <: `Box[Animal]`)    | –ö–æ–ª–∏ —Ç–∏–ø —Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞—î—Ç—å—Å—è<br/>–ö–æ–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ª–∏—à–µ –≤–∏—Ä–æ–±–ª—è—î –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Producer, Immutable List).                          |‚úÖ –¢–∞–∫                | ‚ùå –ù—ñ                |`List[+A]`,<br/>`Seq[+A]`,<br/>`Option[+A]`,<br/>`trait Producer[+A] { def get: A }` | –ù–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–∏–ø `A` —É –ø–æ–∑–∏—Ü—ñ—è—Ö, –¥–µ –≤—ñ–Ω "—Å–ø–æ–∂–∏–≤–∞—î—Ç—å—Å—è" (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –º–µ—Ç–æ–¥—ñ–≤). –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–¥–∞—Å—Ç—å –ø–æ–º–∏–ª–∫—É           |
| –ö–æ–Ω—Ç—Ä–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å | `-A`       | üîÅ –û–±–µ—Ä—Ç–∞—î—Ç—å—Å—è<br/>`Box[Animal]` —î –ø—ñ–¥—Ç–∏–ø–æ–º `Box[Dog]` (`Box` —î –∫–æ–Ω—Ç—Ä–≤–∞—Ä—ñ–∞–Ω—Ç–Ω–∏–º —Ç–∏–ø–æ–º)<br/>`Box[Animal]` <: `Box[Dog]`                                                 | –ö–æ–ª–∏ —Ç–∏–ø —Ç—ñ–ª—å–∫–∏ —Å–ø–æ–∂–∏–≤–∞—î –¥–∞–Ω—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ñ—É–Ω–∫—Ü—ñ—ó)<br/>–ö–æ–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ª–∏—à–µ —Å–ø–æ–∂–∏–≤–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Consumer, Function Input). |‚ùå –ù—ñ                 | ‚úÖ –¢–∞–∫               | `Function1[-A, +B]` (–¥–ª—è `A`), `trait Consumer[-A] { def process(a: A): Unit }`.    | –ù–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–∏–ø A —É –ø–æ–∑–∏—Ü—ñ—è—Ö, –¥–µ –≤—ñ–Ω "–≤–∏—Ä–æ–±–ª—è—î—Ç—å—Å—è" (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ –º–µ—Ç–æ–¥—ñ–≤). –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–¥–∞—Å—Ç—å –ø–æ–º–∏–ª–∫—É. |

---

### –ü–æ—è—Å–Ω–µ–Ω–Ω—è —Ç–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ –ø–æ–∑–∏—Ü—ñ–π

–©–æ–± –∫—Ä–∞—â–µ –≤—ñ–∑—É–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ "–≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞" —Ç–∞ "—Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è", —É—è–≤—ñ—Ç—å —Å–æ–±—ñ —Ç–∏–ø `A` —É —Ñ—É–Ω–∫—Ü—ñ—ó:

```scala 3
trait MyTrait[VarianceTypeParameter] {
  def producerMethod: VarianceTypeParameter // –ü–æ–∑–∏—Ü—ñ—è "–≤–∏—Ä–æ–±–Ω–∏–∫–∞" (–ø–æ–≤–µ—Ä—Ç–∞—î)
  def consumerMethod(param: VarianceTypeParameter): Unit // –ü–æ–∑–∏—Ü—ñ—è "—Å–ø–æ–∂–∏–≤–∞—á–∞" (–ø—Ä–∏–π–º–∞—î)
  var field: VarianceTypeParameter // –ü–æ–∑–∏—Ü—ñ—è "—ñ –≤–∏—Ä–æ–±–Ω–∏–∫–∞, —ñ —Å–ø–æ–∂–∏–≤–∞—á–∞"
}
```

---

### –°–ø—Ä–æ—â–µ–Ω–∞ "–î—ñ–∞–≥—Ä–∞–º–∞ –ü–æ—Ç–æ–∫—É –¢–∏–ø—ñ–≤"

```
                 +----------------------------+
                 |    –ö–û–ù–¢–ï–ô–ù–ï–† (TRAIT/CLASS) |
                 +----------------------------+
                          |
                          v
                    +--------------+
                    |    –¢–∏–ø A     |
                    +--------------+
          (–¥–µ –≤—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π?)
                      /      \
                     /        \
                    v          v
          "–í–ò–†–û–ë–õ–Ø–Ñ"         "–°–ü–û–ñ–ò–í–ê–Ñ"
       (–ü–æ–∑–∏—Ç–∏–≤–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è) (–ù–µ–≥–∞—Ç–∏–≤–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è)
    (–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è, –∫–æ–ª–µ–∫—Ü—ñ—ó) (–ü–∞—Ä–∞–º–µ—Ç—Ä–∏, —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –≤—Ö–æ–¥–∏)
```

- **–ö–æ–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`+A`): –¢–∏–ø `A` –º–æ–∂–µ –±—É—Ç–∏ –ª–∏—à–µ —É "–≤–∏—Ä–æ–±–Ω–∏—á–∏—Ö" –ø–æ–∑–∏—Ü—ñ—è—Ö. –î—É–º–∞–π—Ç–µ, —â–æ –¥–∞–Ω—ñ –≤–∏—Ö–æ–¥—è—Ç—å –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. `Container[+A] def get: A` (–û–ö) `def put(value: A)` (–ù–ï –û–ö)
- **–ö–æ–Ω—Ç—Ä–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`-A`): –¢–∏–ø A –º–æ–∂–µ –±—É—Ç–∏ –ª–∏—à–µ —É "—Å–ø–æ–∂–∏–≤—á–∏—Ö" –ø–æ–∑–∏—Ü—ñ—è—Ö. –î—É–º–∞–π—Ç–µ, —â–æ –¥–∞–Ω—ñ –≤—Ö–æ–¥—è—Ç—å —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. `Container[-A] def get: A` (–ù–ï –û–ö) `def put(value: A)` (–û–ö)
- **–Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–Ω—ñ—Å—Ç—å** (`A`): –¢–∏–ø `A` –º–æ–∂–µ –±—É—Ç–∏ —è–∫ —É "–≤–∏—Ä–æ–±–Ω–∏—á–∏—Ö", —Ç–∞–∫ —ñ –≤ "—Å–ø–æ–∂–∏–≤—á–∏—Ö" –ø–æ–∑–∏—Ü—ñ—è—Ö. –î–∞–Ω—ñ –≤—Ö–æ–¥—è—Ç—å —ñ –≤–∏—Ö–æ–¥—è—Ç—å. `Container[A] def get: A` (–û–ö) `def put(value: A)` (–û–ö)
---
